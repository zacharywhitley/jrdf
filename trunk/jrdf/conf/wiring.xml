<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN"
    "http://www.springframework.org/dtd/spring-beans.dtd">

<beans>
    <!-- Graph Classes -->
    <bean class="org.jrdf.graph.index.longindex.mem.LongIndexMem" singleton="false">
    </bean>

    <bean class="org.jrdf.graph.index.nodepool.mem.NodePoolMemImpl" singleton="false">
    </bean>

    <bean name="graphFactory" class="org.jrdf.graph.mem.OrderedGraphFactoryImpl" singleton="false">
        <constructor-arg>
            <list>
                <ref bean="org.jrdf.graph.index.longindex.mem.LongIndexMem"/>
                <ref bean="org.jrdf.graph.index.longindex.mem.LongIndexMem"/>
                <ref bean="org.jrdf.graph.index.longindex.mem.LongIndexMem"/>
            </list>
        </constructor-arg>
        <constructor-arg ref="org.jrdf.graph.index.nodepool.mem.NodePoolMemImpl"/>
        <constructor-arg>
            <ref bean="nodeComparator"/>
        </constructor-arg>
    </bean>

    <!-- Relational Classes -->
    <bean name="nodeTypeComparator" class="org.jrdf.util.NodeTypeComparatorImpl">
    </bean>

    <bean name="attributeComparator" class="org.jrdf.query.relation.mem.AttributeComparatorImpl">
        <constructor-arg>
            <ref bean="nodeTypeComparator"/>
        </constructor-arg>
    </bean>

    <bean name="nodeComparator" class="org.jrdf.graph.mem.NodeComparatorImpl">
        <constructor-arg>
            <ref bean="nodeTypeComparator"/>
        </constructor-arg>
    </bean>

    <bean name="avpComparator" class="org.jrdf.query.relation.mem.AttributeValuePairComparatorImpl">
        <constructor-arg>
            <ref bean="nodeComparator"/>
        </constructor-arg>
        <constructor-arg>
            <ref bean="attributeComparator"/>
        </constructor-arg>
    </bean>

    <bean name="tupleComparator" class="org.jrdf.query.relation.mem.TupleComparatorImpl">
        <constructor-arg>
            <ref bean="avpComparator"/>
        </constructor-arg>
    </bean>

    <bean name="relationComparator" class="org.jrdf.query.relation.mem.RelationComparatorImpl">
        <constructor-arg>
            <ref bean="attributeComparator"/>
        </constructor-arg>
        <constructor-arg>
            <ref bean="tupleComparator"/>
        </constructor-arg>
    </bean>

    <bean name="join" class="org.jrdf.query.relation.operation.mem.JoinImpl">
        <constructor-arg>
            <ref bean="tupleComparator"/>
        </constructor-arg>
        <constructor-arg>
            <ref bean="attributeComparator"/>
        </constructor-arg>
        <constructor-arg>
            <ref bean="avpComparator"/>
        </constructor-arg>
    </bean>

    <!-- Query Classes -->
    <bean name="sparqlConnection" class="org.jrdf.sparql.SparqlConnectionImpl">
        <constructor-arg type="java.net.URL">
            <value>http://jrdf.sf.net/connection#NO_SECURITY</value>
        </constructor-arg>
        <constructor-arg>
            <ref bean="queryBuilder"/>
        </constructor-arg>
        <constructor-arg>
            <ref bean="jrdfQueryExecutorFactory"/>
        </constructor-arg>
    </bean>

    <bean name="queryBuilder" class="org.jrdf.sparql.SparqlQueryBuilder">
        <constructor-arg>
            <ref bean="sparqlParser"/>
        </constructor-arg>
    </bean>

    <bean name="sparqlParser" class="org.jrdf.sparql.parser.SableCcSparqlParser"/>

    <bean name="jrdfQueryExecutorFactory" class="org.jrdf.query.execute.NaiveQueryExecutorFactory">
        <constructor-arg type="java.net.URL">
            <value>http://jrdf.sf.net/connection#NO_SECURITY</value>
        </constructor-arg>
        <constructor-arg>
            <ref bean="sortedAttributeValuePairFactory"/>
        </constructor-arg>
        <constructor-arg>
            <ref bean="restrict"/>
        </constructor-arg>
        <constructor-arg>
            <ref bean="graphRelationFactory"/>
        </constructor-arg>
    </bean>

    <!-- Relational Operations and Supporting Classes -->
    <bean name="sortedAttributeFactory" class="org.jrdf.query.relation.mem.SortedAttributeFactoryImpl">
        <constructor-arg>
            <ref bean="attributeComparator"/>
        </constructor-arg>
    </bean>

    <bean name="sortedAttributeValuePairFactory" class="org.jrdf.query.relation.mem.SortedAttributeValuePairFactoryImpl">
        <constructor-arg>
            <ref bean="sortedAttributeFactory"/>
        </constructor-arg>
        <constructor-arg>
            <ref bean="avpComparator"/>
        </constructor-arg>
    </bean>

    <bean name="restrict" class="org.jrdf.query.relation.operation.mem.RestrictImpl">
        <constructor-arg>
            <ref bean="attributeComparator"/>
        </constructor-arg>
        <constructor-arg>
            <ref bean="avpComparator"/>
        </constructor-arg>
        <constructor-arg>
            <ref bean="tupleComparator"/>
        </constructor-arg>
    </bean>

    <bean name="graphRelationFactory" class="org.jrdf.query.relation.mem.GraphRelationFactoryImpl">
        <constructor-arg>
            <ref bean="sortedAttributeFactory"/>
        </constructor-arg>
        <constructor-arg>
            <ref bean="sortedAttributeValuePairFactory"/>
        </constructor-arg>
        <constructor-arg>
            <ref bean="avpComparator"/>
        </constructor-arg>
        <constructor-arg>
            <ref bean="tupleComparator"/>
        </constructor-arg>
    </bean>
</beans>