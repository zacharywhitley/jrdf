<?xml version="1.0" encoding="UTF-8"?>
<project name="jrdf-drql" default="gen-drql-parser" basedir=".">

    <import file="build-setup.xml"/>

    <target name="gen-drql-parser" depends="-drql-parser-uptodate" unless="drql-parser-uptodate">
        <sablecc.macro grammar.file="sparql.grammar"/>
    </target>

    <target name="-drql-parser-uptodate">
        <uptodate property="drql-parser-uptodate"
                  targetfile="${gen.src.dir}/org/jrdf/drql/parser/analysis/DepthFirstAdapter.java">
            <srcfiles dir="${sablecc.src.dir}" includes="sparql.grammar"/>
        </uptodate>
    </target>

    <!-- FIXME TJA: Is there a better way to do this? Maybe specify in the classpath? -->
    <target name="-copy-drql-sablecc-resources">
        <copy file="${gen.src.dir}/org/jrdf/drql/parser/lexer/lexer.dat"
              tofile="${prod.classes.dir}/org/jrdf/drql/parser/lexer/lexer.dat"/>
        <copy file="${gen.src.dir}/org/jrdf/drql/parser/parser/parser.dat"
              tofile="${prod.classes.dir}/org/jrdf/drql/parser/parser/parser.dat"/>
    </target>

</project>
